(this["webpackJsonpbanner-web"]=this["webpackJsonpbanner-web"]||[]).push([[0],{42:function(e,t,n){},44:function(e,t,n){},47:function(e,t){},57:function(e,t,n){"use strict";n.r(t);var a=n(7),s=n.n(a),i=n(32),r=n.n(i),c=(n(42),n(2)),o=n.n(c),u=n(15),d=n(8);n(44);function p(e){if(e&&e.length>38)return"".concat(e.substring(0,6),"...").concat(e.substring(38))}var l=n(14),b=n(5);var y=function(e){var t=Object(a.useState)(12),n=Object(d.a)(t,2),s=n[0],i=n[1],r=Object(a.useState)(!1),c=Object(d.a)(r,2),y=c[0],m=c[1],j=Object(a.useState)(localStorage.getItem("account")),h=Object(d.a)(j,2),f=h[0],g=h[1],O=e.setUserId,v=e.setSigner,x=e.setChain,T=e.message,w=Object(a.useCallback)((function(){g(null),O(null),localStorage.removeItem("account")}),[O]),k=Object(a.useCallback)(Object(u.a)(o.a.mark((function e(){var t,n,a,s,i,r,c,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("connectUser"),t={"0x4":"rinkeby"},n=window,a=n.ethereum,e.prev=3,e.next=6,a.request({method:"eth_requestAccounts"});case 6:if(!(s=e.sent)[0]){e.next=21;break}return i=l.a.utils.getAddress(s[0]),g(i),O(i),localStorage.setItem("account",i),r=new l.a.providers.Web3Provider(window.ethereum),c=r.getSigner(),v(c),e.next=17,a.request({method:"eth_chainId"});case 17:u=e.sent,x(t[u]),e.next=22;break;case 21:w();case 22:e.next=28;break;case 24:e.prev=24,e.t0=e.catch(3),console.error("getAccount ERROR",e.t0),w();case 28:case"end":return e.stop()}}),e,null,[[3,24]])}))),[w,O,v,x]);return Object(a.useEffect)((function(){var e=window.ethereum;m(e&&e.isMetaMask),y&&(e.on("accountsChanged",(function(e){console.log("accountsChanged",e),e.length?k():w()})),e.on("disconnect",(function(){console.log("disconnect"),w()})),e.on("chainChanged",(function(e){console.log("chainChanged",e),window.location.reload()})),f&&k())}),[y,k,w,f]),Object(a.useEffect)((function(){var e=T?T.length:1e3;i(e>800?16:e>500?20:e>250?30:e>190?34:e>100?40:e>50?50:e>20?55:e>10?60:e>6?100:e>3?130:200)}),[T]),Object(b.jsxs)("div",{id:"container",children:[Object(b.jsxs)("div",{id:"sky",children:[Object(b.jsx)("div",{className:"shooting-star"}),Object(b.jsx)("div",{className:"shooting-star"}),Object(b.jsx)("div",{id:"star1",className:"stars",children:"*"}),Object(b.jsx)("div",{id:"star2",className:"stars",children:"*"}),Object(b.jsx)("div",{id:"star3",className:"stars",children:"*"}),Object(b.jsx)("div",{id:"star4",className:"stars",children:"*"}),Object(b.jsx)("div",{id:"star5",className:"stars",children:"*"}),Object(b.jsx)("div",{id:"star6",className:"stars",children:"*"}),Object(b.jsx)("div",{id:"star7",className:"stars",children:"*"})]}),Object(b.jsx)("div",{id:"billboard",style:{fontSize:"".concat(s,"px")},children:e.message}),Object(b.jsxs)("div",{id:"lights",children:[Object(b.jsx)("div",{id:"light1",className:"light"}),Object(b.jsx)("div",{id:"light2",className:"light"})]}),Object(b.jsx)("div",{id:"pole"}),Object(b.jsxs)("div",{id:"base-price",children:[Object(b.jsx)("div",{className:"price-pole",children:"\xa0"}),f?"CONNECTED "+p(f):Object(b.jsx)("button",{onClick:function(){return k()},children:"CONNECT WALLET"}),Object(b.jsx)("div",{className:"price-pole",children:"\xa0"})]}),Object(b.jsxs)("div",{id:"base",children:["Paid \u039e",e.price," By \xa0",Object(b.jsx)("a",{href:"https://".concat("","etherscan.io/address/").concat(e.publisher),target:"_blank",rel:"noreferrer",className:"external",children:function(){if(e.publisher)return"".concat(e.publisher.substring(0,6),"..").concat(e.publisher.substring(38))}()})]}),Object(b.jsx)("div",{id:"road"})]})},m=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"message",type:"string"},{indexed:!1,internalType:"uint256",name:"price",type:"uint256"},{indexed:!1,internalType:"address",name:"publisher",type:"address"}],name:"NewMessage",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"baseURI",type:"string"}],name:"setBaseURI",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"message",type:"string"}],name:"setMessage",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"withdrawAll",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"price",type:"uint256"},{internalType:"string",name:"message",type:"string"},{internalType:"string",name:"baseURI",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getInfo",outputs:[{internalType:"string",name:"",type:"string"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getMessage",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"getPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getPublisher",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}],j=function(e){console.log("chain",e);var t={mainnet:{address:"",infuraName:"mainnet"},rinkeby:{address:"0x6f784d11BF8040b047a28d85cbd3b0b186BD453C",infuraName:"rinkeby"}},n=new l.a.providers.InfuraProvider(t[e].infuraName,"5ac032ada81f40b3808b1c90bacc95ba");return new l.a.Contract(t[e].address,m,n)};function h(e){return f.apply(this,arguments)}function f(){return(f=Object(u.a)(o.a.mark((function e(t){var n,a,s,i,r,c,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=j(t),e.next=3,n.getInfo();case 3:return a=e.sent,s=Object(d.a)(a,3),i=s[0],r=s[1],c=s[2],u=l.a.utils.formatEther(r.toString()),e.abrupt("return",[i,x(u,2),c]);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e,t){j(e).on("NewMessage",(function(e,n,a){console.log("NewMessage",e,n,a);var s=l.a.utils.formatEther(n.toString());t(e,x(s,2),a)}))}function O(e,t,n,a){return v.apply(this,arguments)}function v(){return(v=Object(u.a)(o.a.mark((function e(t,n,a,s){var i,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=j(t),e.prev=1,e.next=4,i.connect(n).setMessage(a,{value:s});case 4:return r=e.sent,e.abrupt("return",r.hash);case 8:return e.prev=8,e.t0=e.catch(1),console.log(e.t0),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function x(e,t){return t=Math.pow(10,t),Math.ceil(e*t)/t}function T(e){var t=Object(a.useState)(),n=Object(d.a)(t,2),s=n[0],i=n[1],r=Object(a.useState)(),c=Object(d.a)(r,2),p=c[0],y=c[1],m=Object(a.useState)(),j=Object(d.a)(m,2),h=j[0],f=j[1],g=Object(a.useState)(!1),v=Object(d.a)(g,2),x=v[0],T=v[1],w=.01,k=e.setTxPending,M=e.chain;Object(a.useEffect)((function(){if(e.price){var t=e.price+w;f(S(t))}}),[e.price,k]);var N=function(){var t=Object(u.a)(o.a.mark((function t(n){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),!e.signer){t.next=6;break}return t.next=4,O(M,e.signer,p,l.a.utils.parseEther(h.toString()).toString());case 4:(a=t.sent)&&(i(a),e.setTxPending(!0));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();function S(e){return Math.round(100*e)/100}return 0===e.price||e.price?Object(b.jsxs)("div",{id:"buy",children:[Object(b.jsx)("h2",{children:"Override billboard"}),s?Object(b.jsxs)("div",{id:"transaction",children:[Object(b.jsx)("a",{href:"https://".concat("","etherscan.io/tx/").concat(s),target:"_blank",rel:"noreferrer",className:"external",children:"Transaction"})," ","is pending ",Object(b.jsx)("div",{className:"loader"})]}):Object(b.jsxs)("form",{onSubmit:N,children:[Object(b.jsx)("div",{id:"custom-button",children:Object(b.jsx)("input",{type:"button",id:"advance",onClick:function(){return T(!x)},value:x?"basic":"settings"})}),Object(b.jsx)("div",{className:"clear"}),Object(b.jsx)("div",{className:"grow-wrap",children:Object(b.jsx)("textarea",{"data-gramm_editor":"false",id:"newMessage",rows:"1",placeholder:"Type your message...",value:p,onChange:function(e){return y(e.target.value)},maxLength:"1000",required:!0,name:"message",onInput:function(e){return e.target.parentNode.dataset.replicatedValue=e.target.value}})}),x&&Object(b.jsxs)("div",{id:"advance-setttings",children:["Set custom price:",Object(b.jsx)("input",{type:"number",step:w,min:S(e.price+w),defaultValue:h,onChange:function(t){var n=parseFloat(t.target.value);isNaN(n)||n<=e.price||f(n)}}),Object(b.jsxs)("div",{id:"tip",children:["Price has to be greater than \u039e",e.price,".",Object(b.jsx)("br",{}),"Message stays until someone pays more than you."]})]}),Object(b.jsx)("div",{children:Object(b.jsx)("input",{id:"submit",type:"submit",value:"Publish for \u039e".concat(h)})})]})]}):""}var w=function(){var e=Object(a.useState)(),t=Object(d.a)(e,2),n=t[0],s=t[1],i=Object(a.useState)(),r=Object(d.a)(i,2),c=r[0],p=r[1],l=Object(a.useState)(),m=Object(d.a)(l,2),j=m[0],f=m[1],O=Object(a.useState)(),v=Object(d.a)(O,2),x=v[0],w=v[1],k=Object(a.useState)(!1),M=Object(d.a)(k,2),N=M[0],S=M[1],I=Object(a.useState)(!1),C=Object(d.a)(I,2),E=C[0],P=C[1],A=Object(a.useState)("rinkeby"),F=Object(d.a)(A,2),B=F[0],R=F[1],D=Object(a.useState)(),L=Object(d.a)(D,2),U=L[0],_=L[1];return Object(a.useEffect)((function(){var e=function(e){var t=document.createElement("script");t.src=e,t.async=!0,document.body.appendChild(t)};e('https://www.googletagmanager.com/gtag/js?id=G-6WS15T0K6D"'),e("/FS.js")}),[]),Object(a.useEffect)((function(){function e(){return(e=Object(u.a)(o.a.mark((function e(){var t,n,a,i,r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(e,t,n){s(e),p(t),f(n)},e.next=3,h(B);case 3:n=e.sent,a=Object(d.a)(n,3),i=a[0],r=a[1],c=a[2],t(i,r,c),g(B,(function(e,n,a){t(e,n,a),N&&P(!0)}));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}B&&function(){e.apply(this,arguments)}(B)}),[N,B]),Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)("h1",{children:"CRYPTO BILLBOARD"}),Object(b.jsx)("div",{id:"tagline",children:"Publish your message to be part of the blockchain history!"}),"mainnet"!==B&&Object(b.jsxs)("div",{id:"chain",children:["- ",B||"unsupported network"," -"]}),Object(b.jsx)("div",{children:B&&Object(b.jsx)(y,{setSigner:w,setChain:R,message:n,publisher:j,price:c,setUserId:_})}),Object(b.jsxs)("div",{children:[E&&Object(b.jsxs)("div",{id:"complete",children:["Transaction is done. ",Object(b.jsx)("br",{})," Your message is on the billboard \ud83c\udf89"]}),U&&!E&&B&&Object(b.jsx)(T,{price:c,signer:x,setTxPending:S,chain:B}),Object(b.jsxs)("div",{id:"info",children:["Welcome to a decentralized social experiment \ud83d\udc4b ",Object(b.jsx)("br",{}),"The billboard above"," ",Object(b.jsx)("a",{href:"https://".concat("","etherscan.io/address/").concat("0x6f784d11BF8040b047a28d85cbd3b0b186BD453C"),className:"external",target:"_blank",rel:"noreferrer",children:"exists on the Etherume blockchain"})," ","The message is censorship-resistant and available to everyone.",Object(b.jsx)("br",{}),Object(b.jsx)("br",{}),"The billboard also shows the owner and price paid for the message to be published.",Object(b.jsx)("br",{}),"To override this message with your own, you will need to pay more ETH than the previous price paid.",Object(b.jsx)("br",{}),Object(b.jsx)("br",{}),"Publishers are gifted a unique BLBD NFT \ud83e\udd84.",Object(b.jsx)("br",{}),Object(b.jsx)("br",{}),"Your message will stay forever on the blockchain unless someone decides to pay more to publish their message instead.",Object(b.jsx)("br",{}),Object(b.jsx)("br",{}),"Got something to tell the world? Publish it now!"]})]}),Object(b.jsx)("hr",{}),Object(b.jsx)("div",{id:"footer",children:"Make history - publish your message on the billboard blockchain."})]})},k=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,59)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),a(e),s(e),i(e),r(e)}))};r.a.render(Object(b.jsx)(s.a.StrictMode,{children:Object(b.jsx)(w,{})}),document.getElementById("root")),k()}},[[57,1,2]]]);
//# sourceMappingURL=main.fdfa4e2e.chunk.js.map